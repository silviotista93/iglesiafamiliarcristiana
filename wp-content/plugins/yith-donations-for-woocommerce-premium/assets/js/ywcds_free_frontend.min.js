jQuery(document).ready(function(c){var s=function(a,t,n){fragments=n.fragments,cart_hash=n.cart_has,fragments&&c.each(fragments,function(a,t){c(a).addClass("updating")}),c(".shop_table.cart, .updating, .cart_totals").fadeTo("400","0.6").block({message:null,overlayCSS:{opacity:.6}}),a.addClass("added"),fragments&&c.each(fragments,function(a,t){c(a).replaceWith(t)}),c(".widget_shopping_cart, .updating").stop(!0).css("opacity","1").unblock(),c(".shop_table.cart").load(t+" .shop_table.cart:eq(0) > *",function(){c(".shop_table.cart").stop(!0).css("opacity","1").unblock(),c("body").trigger("cart_page_refreshed")}),c(".cart_totals").load(t+" .cart_totals:eq(0) > *",function(){c(".cart_totals").stop(!0).css("opacity","1").unblock()})};c(document).on("click",".ywcds_submit_widget.ywcds_ajax_add_donation",function(a){var t=c(this),n=t.parents("#ywcds_add_donation_form");n.find(".ywcds_amount").val();return a.preventDefault(),function(r,a){var t=a.serializeFormJSON();t.add_donation_to_cart=-1,t.action=yith_wcds_frontend_l10n.actions.add_donation_to_cart;var d=r.parents(".ywcds_form_container");c.ajax({type:"GET",url:yith_wcds_frontend_l10n.ajax_url,data:t,dataType:"json",beforeSend:function(){d.find(".ajax-loading").css("visibility","visible")},complete:function(){d.find(".ajax-loading").css("visibility","hidden")},success:function(a){var t,n,e=(e=window.location.toString()).replace("add-to-cart","added-to-cart"),o=d.find(".ywcds_message");a.fragments?(s(r,e,a),o.removeClass("woocommerce-error"),"undefined"!=typeof ywcds_params&&"undefined"!=typeof ywcds_params.donation_in_cart&&(ywcds_params.donation_in_cart=1),t="",wc_add_to_cart_params.is_cart||r.parent().find(".added_to_cart").length||(t=' <a href="'+wc_add_to_cart_params.cart_url+'" class="added_to_cart wc-forward" title="'+wc_add_to_cart_params.i18n_view_cart+'">'+wc_add_to_cart_params.i18n_view_cart+"</a>"),o.html(yith_wcds_frontend_l10n.messages.success+t),yith_wcds_frontend_l10n.redirect_after_add_to_cart&&window.location.replace(yith_wcds_frontend_l10n.redirect_after_add_to_cart)):(a.result,n=a.message,d.find(".ywcds_amount").css("border","1px solid red"),o.addClass("woocommerce-error"),o.html(n)),o.show()}})}(t,n),!1}),c(document).on("click",".single_add_to_cart_button",function(a){c(this);var t=c(document).find("#ywcds_add_donation_form_single_product"),n=t.find(".ywcds_amount_single_product"),e=t.data("donation_is_obligatory"),o=t.data("min_donation"),r=t.data("max_donation"),d=c(document).find(".woocommerce-breadcrumb"),s='<div class="woocommerce-error">';if(t.length){c(".woocommerce-error, .woocommerce-message").remove();var i=_(n.val(),o,r,e);if("ok"!=i){switch(i){case"nan":s+=yith_wcds_frontend_l10n.messages.no_number+"</div>";break;case"less_zero":s+=yith_wcds_frontend_l10n.messages.negative+"</div>";break;case"empty":s+=yith_wcds_frontend_l10n.messages.obligatory+"</div>";break;case"min":s+=yith_wcds_frontend_l10n.messages.min_don+"</div>";break;case"max":s+=yith_wcds_frontend_l10n.messages.max_don+"</div>"}return d.after(s),c(document).scrollTop(0),a.preventDefault(),c(document).trigger("ywcds_error_value",[c(this)]),!1}}});var _=function(a,t,n,e){var o=new RegExp("[^-0-9%\\"+yith_wcds_frontend_l10n.mon_decimal_point+"]+","gi"),r=a.replace(o,"");if(a!==r)return"nan";if(""==a&&e)return"empty";if(r=r.replace(yith_wcds_frontend_l10n.mon_decimal_point,"."),(a=parseFloat(r))<0)return"less_zero";if(""!=a){if(""!=t&&(t=""+t+"".replace(yith_wcds_frontend_l10n.mon_decimal_point,"."),a<(t=parseFloat(t))))return"min";if(""!=n&&(n=""+n+"".replace(yith_wcds_frontend_l10n.mon_decimal_point,"."),(n=parseFloat(n))<a))return"max"}return"ok"};c(document).on("click",".ywcdp_single_amount",function(a){var t;t=c(this).is("input:radio")?c(this).val():c(this).find("input").val(),c(this).parents("#ywcds_add_donation_form").find(".ywcds_amount").val(t)}),c.fn.serializeFormJSON=function(){var a={},t=this.serializeArray();return c.each(t,function(){a[this.name]?(a[this.name].push||(a[this.name]=[a[this.name]]),a[this.name].push(this.value||"")):a[this.name]=this.value||""}),a}});